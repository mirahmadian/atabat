{% extends 'admin_layout.html' %}

{% block content %}
<div>
    <h1>{{ 'ویرایش ماموریت' if assignment else 'افزودن ماموریت جدید' }}</h1>
</div>

<div>
    <form>
        <div>
            <label>نام مدیر راهنما:</label>
            <input type="text" name="manager_name">
        </div>

        <div>
            <label>کد ملی مدیر راهنما:</label>
            <input type="text" name="manager_national_id">
        </div>

        <div>
            <label>بازه تاریخی ماموریت (ورود و خروج):</label>
            <input type="text" id="date_range" name="date_range" readonly>
        </div>

        <div>
            <label>شهر:</label>
            <select name="city"></select>
        </div>

        <div>
            <label>نام هتل:</label>
            <select name="hotel"></select>
        </div>

        <div>
            <label>نام مدیر ثابت:</label>
            <input type="text" name="permanent_manager">
        </div>

        <div>
            <button type="submit">💾 ذخیره</button>
            <button type="button">انصراف</button>
        </div>
    </form>
</div>

<div>
    <div>
        <button>▶</button>
        <button>◀</button>
    </div>
</div>

<div>
    <div>
        <select></select>
    </div>
</div>

<div>
    <button>تایید</button>
    <button>انصراف</button>
</div>
{% endblock %}

{% block scripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/persian-date@1.1.0/dist/js/persian-date.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/js/persian-datepicker.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/css/persian-datepicker.min.css">

<script>
document.addEventListener('DOMContentLoaded', function() {
    const dateRangeInput = document.getElementById('date_range');
    
    // راه‌اندازی تقویم شمسی
    $(dateRangeInput).persianDatepicker({
        format: 'YYYY/MM/DD',
        range: true,
        calendar: {
            persian: true,
            locale: 'fa'
        },
        toolbox: {
            calendarSwitch: {
                enabled: true
            }
        },
        multi: {
            enabled: true,
            number: 2 // نمایش دو ماه کنار هم
        },
        onSelect: function(selectedDates) {
            if (selectedDates.length === 2) {
                const [startDate, endDate] = selectedDates;
                dateRangeInput.value = `${startDate.format('YYYY/MM/DD')} - ${endDate.format('YYYY/MM/DD')}`;
            }
        }
    });
});
</script>
{% endblock %}
